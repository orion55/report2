{"version":3,"sources":["../../src/api/answersRouter.js"],"names":["anwersRouter","answers","route","get","req","res","checkQuery","notEmpty","isDate","getValidationResult","then","result","isEmpty","set","status","send","JSON","stringify","array","getReport","contentType","catch","err"],"mappings":";;;;;;AAAA;;AACA;;;;;;AAEA,IAAIA,eAAe,sBAAnB;AACA,IAAIC,UAAU,4BAAd;;AAEAD,aAAaE,KAAb,CAAmB,GAAnB,EAAwBC,GAAxB,CAA4B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC5CD,QAAIE,UAAJ,CAAe,MAAf,EAAuB,mBAAvB,EAA4CC,QAA5C,GAAuDC,MAAvD;AACAJ,QAAIE,UAAJ,CAAe,IAAf,EAAqB,iBAArB,EAAwCC,QAAxC,GAAmDC,MAAnD;;AAEAJ,QAAIK,mBAAJ,GACKC,IADL,CACU,kBAAU;AACZ,YAAI,CAACC,OAAOC,OAAP,EAAL,EAAuB;AACnBP,gBAAIQ,GAAJ,CAAQ,cAAR,EAAwB,kBAAxB;AACAR,gBAAIS,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqBC,KAAKC,SAAL,CAAeN,OAAOO,KAAP,EAAf,EAA+B,IAA/B,EAAqC,IAArC,CAArB;AACA;AACH;AACDjB,gBAAQkB,SAAR,GACKT,IADL,CACU,kBAAU;AACZL,gBAAIe,WAAJ,CAAgB,kBAAhB,EAAoCN,MAApC,CAA2C,GAA3C;AACAT,gBAAIU,IAAJ,CAASC,KAAKC,SAAL,CAAeN,MAAf,CAAT;AACH,SAJL,EAKKU,KALL,CAKW,eAAO;AACVhB,gBAAIQ,GAAJ,CAAQ,cAAR,EAAwB,kBAAxB;AACAR,gBAAIS,MAAJ,CAAWQ,IAAIR,MAAf,EAAuBC,IAAvB,CAA4BC,KAAKC,SAAL,CAAeK,GAAf,EAAoB,IAApB,EAA0B,IAA1B,CAA5B;AACH,SARL;AASH,KAhBL;AAmBH,CAvBD;;kBAyBetB,Y","file":"answersRouter.js","sourcesContent":["import {Router} from 'express';\r\nimport AnswersModel from '../models/answersModel'\r\n\r\nlet anwersRouter = Router();\r\nlet answers = new AnswersModel();\r\n\r\nanwersRouter.route('/').get(function (req, res) {\r\n    req.checkQuery('from', 'Invalid From date').notEmpty().isDate();\r\n    req.checkQuery('to', 'Invalid To date').notEmpty().isDate();\r\n\r\n    req.getValidationResult()\r\n        .then(result => {\r\n            if (!result.isEmpty()) {\r\n                res.set('Content-Type', 'application/json');\r\n                res.status(500).send(JSON.stringify(result.array(), null, \"\\t\"));\r\n                return;\r\n            }\r\n            answers.getReport()\r\n                .then(result => {\r\n                    res.contentType('application/json').status(200);\r\n                    res.send(JSON.stringify(result));\r\n                })\r\n                .catch(err => {\r\n                    res.set('Content-Type', 'application/json');\r\n                    res.status(err.status).send(JSON.stringify(err, null, \"\\t\"));\r\n                })\r\n        });\r\n\r\n\r\n});\r\n\r\nexport default anwersRouter;\r\n\r\n"]}